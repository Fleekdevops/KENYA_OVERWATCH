<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Kenya Overwatch - AI-Powered Road Safety & Public Security</title>    <script src="https://cdn.tailwindcss.com"></script>    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    <style>        @keyframes pulse-red {            0%, 100% { opacity: 1; }            50% { opacity: 0.5; }        }        .pulse-alert {            animation: pulse-red 2s infinite;        }        .camera-feed {            background: linear-gradient(45deg, #1a1a1a 25%, transparent 25%, transparent 75%, #1a1a1a 75%, #1a1a1a),                        linear-gradient(45deg, #1a1a1a 25%, transparent 25%, transparent 75%, #1a1a1a 75%, #1a1a1a);            background-size: 20px 20px;            background-position: 0 0, 10px 10px;        }        .detection-box {            position: absolute;            border: 2px solid #ef4444;            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);        }        .modal {            display: none;            position: fixed;            z-index: 1000;            left: 0;            top: 0;            width: 100%;            height: 100%;            background-color: rgba(0,0,0,0.5);        }        .modal.active {            display: flex;        }    </style></head><body class="bg-gray-100">    <!-- Header -->    <header class="bg-gradient-to-r from-blue-900 to-blue-700 text-white shadow-lg">        <div class="container mx-auto px-4 py-4">            <div class="flex items-center justify-between">                <div class="flex items-center space-x-3">                    <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>                    </svg>                    <div>                        <h1 class="text-2xl font-bold">Kenya Overwatch</h1>                        <p class="text-sm text-blue-200">AI-Powered Road Safety & Public Security</p>                    </div>                </div>                <div class="flex items-center space-x-4">                    <div class="text-right">                        <p class="text-sm">System Status</p>                        <p class="text-green-300 font-semibold flex items-center">                            <span class="w-2 h-2 bg-green-400 rounded-full mr-2 pulse-alert"></span>                            Operational                        </p>                    </div>                </div>            </div>        </div>    </header>    <!-- Navigation -->    <nav class="bg-white shadow-md sticky top-0 z-50">        <div class="container mx-auto px-4">            <div class="flex space-x-1">                <button onclick="switchTab('dashboard')" class="tab-btn px-6 py-3 font-semibold border-b-2 border-blue-600 text-blue-600">                    Dashboard                </button>                <button onclick="switchTab('monitoring')" class="tab-btn px-6 py-3 font-semibold border-b-2 border-transparent text-gray-600 hover:text-blue-600">                    Live Monitoring                </button>                <button onclick="switchTab('incidents')" class="tab-btn px-6 py-3 font-semibold border-b-2 border-transparent text-gray-600 hover:text-blue-600">                    Incidents                </button>                <button onclick="switchTab('analytics')" class="tab-btn px-6 py-3 font-semibold border-b-2 border-transparent text-gray-600 hover:text-blue-600">                    Analytics                </button>                <button onclick="switchTab('map')" class="tab-btn px-6 py-3 font-semibold border-b-2 border-transparent text-gray-600 hover:text-blue-600">                    Map View                </button>                <button onclick="switchTab('report')" class="tab-btn px-6 py-3 font-semibold border-b-2 border-transparent text-gray-600 hover:text-blue-600">                    Citizen Report                </button>            </div>        </div>    </nav>    <!-- Main Content -->    <main class="container mx-auto px-4 py-6">        <!-- Dashboard Tab -->        <div id="dashboard-tab" class="tab-content">            <!-- Stats Cards -->            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">                <div class="bg-white rounded-lg shadow-md p-6">                    <div class="flex items-center justify-between">                        <div>                            <p class="text-gray-500 text-sm">Active Cameras</p>                            <p class="text-3xl font-bold text-blue-600" id="active-cameras">248</p>                        </div>                        <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>                        </svg>                    </div>                    <p class="text-green-600 text-sm mt-2">↑ 12 new this week</p>                </div>                <div class="bg-white rounded-lg shadow-md p-6">                    <div class="flex items-center justify-between">                        <div>                            <p class="text-gray-500 text-sm">Active Alerts</p>                            <p class="text-3xl font-bold text-red-600" id="active-alerts">17</p>                        </div>                        <svg class="w-12 h-12 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>                        </svg>                    </div>                    <p class="text-red-600 text-sm mt-2">3 critical</p>                </div>                <div class="bg-white rounded-lg shadow-md p-6">                    <div class="flex items-center justify-between">                        <div>                            <p class="text-gray-500 text-sm">Incidents Today</p>                            <p class="text-3xl font-bold text-yellow-600" id="incidents-today">42</p>                        </div>                        <svg class="w-12 h-12 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>                        </svg>                    </div>                    <p class="text-gray-600 text-sm mt-2">↓ 15% from yesterday</p>                </div>                <div class="bg-white rounded-lg shadow-md p-6">                    <div class="flex items-center justify-between">                        <div>                            <p class="text-gray-500 text-sm">Response Time</p>                            <p class="text-3xl font-bold text-green-600">4.2min</p>                        </div>                        <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>                        </svg>                    </div>                    <p class="text-green-600 text-sm mt-2">↓ 2.1min improvement</p>                </div>            </div>            <!-- Recent Alerts -->            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4 flex items-center">                        <span class="w-3 h-3 bg-red-500 rounded-full mr-2 pulse-alert"></span>                        Recent Critical Alerts                    </h2>                    <div id="alerts-container" class="space-y-3 max-h-96 overflow-y-auto">                        <!-- Alerts will be populated by JavaScript -->                    </div>                </div>                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4">County Distribution</h2>                    <canvas id="countyChart"></canvas>                </div>            </div>            <!-- Quick Actions -->            <div class="mt-6 bg-white rounded-lg shadow-md p-6">                <h2 class="text-xl font-bold mb-4">Quick Actions</h2>                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">                    <button onclick="dispatchEmergency('police')" class="bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition flex items-center justify-center">                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>                        </svg>                        Dispatch Police                    </button>                    <button onclick="dispatchEmergency('ambulance')" class="bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 transition flex items-center justify-center">                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>                        </svg>                        Ambulance                    </button>                    <button onclick="dispatchEmergency('fire')" class="bg-orange-600 text-white py-3 px-6 rounded-lg hover:bg-orange-700 transition flex items-center justify-center">                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/>                        </svg>                        Fire Service                    </button>                    <button onclick="generateReport()" class="bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition flex items-center justify-center">                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>                        </svg>                        Generate Report                    </button>                </div>            </div>        </div>        <!-- Live Monitoring Tab -->        <div id="monitoring-tab" class="tab-content hidden">            <div class="bg-white rounded-lg shadow-md p-6 mb-6">                <h2 class="text-xl font-bold mb-4">Live AI Camera Feeds</h2>                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="camera-feeds">                    <!-- Camera feeds will be populated by JavaScript -->                </div>            </div>            <div class="bg-white rounded-lg shadow-md p-6">                <h2 class="text-xl font-bold mb-4">Detection Log</h2>                <div class="overflow-x-auto">                    <table class="w-full">                        <thead class="bg-gray-100">                            <tr>                                <th class="px-4 py-2 text-left">Time</th>                                <th class="px-4 py-2 text-left">Camera</th>                                <th class="px-4 py-2 text-left">Detection</th>                                <th class="px-4 py-2 text-left">Confidence</th>                                <th class="px-4 py-2 text-left">Status</th>                            </tr>                        </thead>                        <tbody id="detection-log">                            <!-- Detection log will be populated by JavaScript -->                        </tbody>                    </table>                </div>            </div>        </div>        <!-- Incidents Tab -->        <div id="incidents-tab" class="tab-content hidden">            <div class="bg-white rounded-lg shadow-md p-6">                <div class="flex justify-between items-center mb-4">                    <h2 class="text-xl font-bold">Incident Management</h2>                    <select id="incident-filter" class="border rounded px-4 py-2" onchange="filterIncidents()">                        <option value="all">All Incidents</option>                        <option value="accident">Accidents</option>                        <option value="violation">Violations</option>                        <option value="security">Security</option>                        <option value="infrastructure">Infrastructure</option>                    </select>                </div>                <div class="space-y-4" id="incidents-list">                    <!-- Incidents will be populated by JavaScript -->                </div>            </div>        </div>        <!-- Analytics Tab -->        <div id="analytics-tab" class="tab-content hidden">            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4">Incident Trends (30 Days)</h2>                    <canvas id="trendsChart"></canvas>                </div>                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4">Detection Categories</h2>                    <canvas id="categoriesChart"></canvas>                </div>            </div>            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4">Hotspot Analysis</h2>                    <div class="space-y-3" id="hotspots-list">                        <!-- Hotspots will be populated by JavaScript -->                    </div>                </div>                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4">Response Metrics</h2>                    <div class="space-y-4">                        <div>                            <div class="flex justify-between mb-1">                                <span class="text-sm text-gray-600">Police Response</span>                                <span class="text-sm font-semibold">3.8 min</span>                            </div>                            <div class="w-full bg-gray-200 rounded-full h-2">                                <div class="bg-blue-600 h-2 rounded-full" style="width: 85%"></div>                            </div>                        </div>                        <div>                            <div class="flex justify-between mb-1">                                <span class="text-sm text-gray-600">Ambulance Response</span>                                <span class="text-sm font-semibold">5.2 min</span>                            </div>                            <div class="w-full bg-gray-200 rounded-full h-2">                                <div class="bg-red-600 h-2 rounded-full" style="width: 78%"></div>                            </div>                        </div>                        <div>                            <div class="flex justify-between mb-1">                                <span class="text-sm text-gray-600">Fire Service Response</span>                                <span class="text-sm font-semibold">6.1 min</span>                            </div>                            <div class="w-full bg-gray-200 rounded-full h-2">                                <div class="bg-orange-600 h-2 rounded-full" style="width: 72%"></div>                            </div>                        </div>                        <div>                            <div class="flex justify-between mb-1">                                <span class="text-sm text-gray-600">NTSA Response</span>                                <span class="text-sm font-semibold">7.5 min</span>                            </div>                            <div class="w-full bg-gray-200 rounded-full h-2">                                <div class="bg-green-600 h-2 rounded-full" style="width: 65%"></div>                            </div>                        </div>                    </div>                </div>                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4">Predictive Insights</h2>                    <div class="space-y-3">                        <div class="border-l-4 border-red-500 pl-3 py-2">                            <p class="font-semibold text-sm">High Risk Period</p>                            <p class="text-xs text-gray-600">Friday 5PM-8PM on Thika Road</p>                            <p class="text-xs text-red-600">95% confidence</p>                        </div>                        <div class="border-l-4 border-yellow-500 pl-3 py-2">                            <p class="font-semibold text-sm">Maintenance Alert</p>                            <p class="text-xs text-gray-600">Camera KE-247 needs servicing</p>                            <p class="text-xs text-yellow-600">72% confidence</p>                        </div>                        <div class="border-l-4 border-blue-500 pl-3 py-2">                            <p class="font-semibold text-sm">Traffic Pattern</p>                            <p class="text-xs text-gray-600">Unusual congestion expected tomorrow</p>                            <p class="text-xs text-blue-600">88% confidence</p>                        </div>                    </div>                </div>            </div>        </div>        <!-- Map View Tab -->        <div id="map-tab" class="tab-content hidden">            <div class="bg-white rounded-lg shadow-md p-6">                <div class="flex justify-between items-center mb-4">                    <h2 class="text-xl font-bold">National Monitoring Map</h2>                    <div class="flex space-x-2">                        <button onclick="toggleMapLayer('cameras')" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">                            Cameras                        </button>                        <button onclick="toggleMapLayer('incidents')" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">                            Incidents                        </button>                        <button onclick="toggleMapLayer('hotspots')" class="px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700">                            Hotspots                        </button>                    </div>                </div>                <div id="map" class="h-96 rounded-lg"></div>            </div>            <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">                <div class="bg-white rounded-lg shadow-md p-4">                    <p class="text-gray-600 text-sm">Cameras Online</p>                    <p class="text-2xl font-bold text-blue-600">248/250</p>                </div>                <div class="bg-white rounded-lg shadow-md p-4">                    <p class="text-gray-600 text-sm">Active Incidents</p>                    <p class="text-2xl font-bold text-red-600">17</p>                </div>                <div class="bg-white rounded-lg shadow-md p-4">                    <p class="text-gray-600 text-sm">Coverage Area</p>                    <p class="text-2xl font-bold text-green-600">47 Counties</p>                </div>            </div>        </div>        <!-- Citizen Report Tab -->        <div id="report-tab" class="tab-content hidden">            <div class="max-w-2xl mx-auto">                <div class="bg-white rounded-lg shadow-md p-6">                    <h2 class="text-xl font-bold mb-4">Citizen Incident Reporting</h2>                    <p class="text-gray-600 mb-6">Help make Kenya safer by reporting incidents in your area. Your report will be verified by AI and dispatched to relevant authorities.</p>                                        <form id="citizen-report-form" class="space-y-4">                        <div>                            <label class="block text-sm font-semibold mb-2">Incident Type</label>                            <select id="report-type" class="w-full border rounded px-4 py-2" required>                                <option value="">Select incident type</option>                                <option value="accident">Road Accident</option>                                <option value="violation">Traffic Violation</option>                                <option value="security">Security Concern</option>                                <option value="infrastructure">Infrastructure Issue</option>                                <option value="breakdown">Vehicle Breakdown</option>                                <option value="other">Other</option>                            </select>                        </div>                        <div>                            <label class="block text-sm font-semibold mb-2">Location</label>                            <input type="text" id="report-location" class="w-full border rounded px-4 py-2" placeholder="e.g., Thika Road, near Exit 9" required>                        </div>                        <div>                            <label class="block text-sm font-semibold mb-2">Description</label>                            <textarea id="report-description" rows="4" class="w-full border rounded px-4 py-2" placeholder="Provide detailed description of the incident..." required></textarea>                        </div>                        <div>                            <label class="block text-sm font-semibold mb-2">Severity</label>                            <div class="flex space-x-4">                                <label class="flex items-center">                                    <input type="radio" name="severity" value="low" class="mr-2" required>                                    <span class="text-sm">Low</span>                                </label>                                <label class="flex items-center">                                    <input type="radio" name="severity" value="medium" class="mr-2">                                    <span class="text-sm">Medium</span>                                </label>                                <label class="flex items-center">                                    <input type="radio" name="severity" value="high" class="mr-2">                                    <span class="text-sm">High</span>                                </label>                                <label class="flex items-center">                                    <input type="radio" name="severity" value="critical" class="mr-2">                                    <span class="text-sm">Critical</span>                                </label>                            </div>                        </div>                        <div>                            <label class="block text-sm font-semibold mb-2">Upload Photo/Video (Optional)</label>                            <input type="file" id="report-media" class="w-full border rounded px-4 py-2" accept="image/*,video/*">                            <p class="text-xs text-gray-500 mt-1">AI will analyze uploaded media for verification</p>                        </div>                        <div>                            <label class="block text-sm font-semibold mb-2">Your Contact (Optional)</label>                            <input type="tel" id="report-contact" class="w-full border rounded px-4 py-2" placeholder="+254 700 000 000">                            <p class="text-xs text-gray-500 mt-1">For follow-up by authorities</p>                        </div>                        <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition">                            Submit Report                        </button>                    </form>                </div>                <div class="mt-6 bg-white rounded-lg shadow-md p-6">                    <h3 class="font-bold mb-3">Recent Citizen Reports</h3>                    <div class="space-y-3" id="citizen-reports-list">                        <!-- Recent reports will be populated here -->                    </div>                </div>            </div>        </div>    </main>    <!-- Success Modal -->    <div id="success-modal" class="modal">        <div class="m-auto bg-white rounded-lg shadow-xl p-8 max-w-md">            <div class="text-center">                <svg class="w-16 h-16 text-green-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>                </svg>                <h3 class="text-2xl font-bold mb-2">Success!</h3>                <p id="modal-message" class="text-gray-600 mb-6"></p>                <button onclick="closeModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">                    Close                </button>            </div>        </div>    </div>    <!-- Footer -->    <footer class="bg-gray-800 text-white mt-12 py-6">        <div class="container mx-auto px-4 text-center">            <p class="mb-2"><strong>Kenya Overwatch</strong> - Powered by FleekTech Enterprise</p>            <p class="text-sm text-gray-400">Founders: Nelson Macharia & Carlos Kipruto</p>            <p class="text-xs text-gray-500 mt-2">Aligned with Vision 2030 | AI for National Prosperity</p>        </div>    </footer>    <script>        // Global Data        let map;        let alerts = [];        let incidents = [];        let detections = [];        let citizenReports = [];        // Initialize Application        document.addEventListener('DOMContentLoaded', function() {            initializeData();            renderAlerts();            renderCameraFeeds();            renderDetectionLog();            renderIncidents();            renderHotspots();            renderCitizenReports();            initializeCharts();            initializeMap();            startRealTimeUpdates();        });        // Initialize Sample Data        function initializeData() {            // Generate sample alerts            const alertTypes = [                { type: 'Overspeeding', location: 'Thika Road, KM 12', severity: 'high', camera: 'KE-247' },                { type: 'Dangerous Overtaking', location: 'Mombasa Road, Exit 5', severity: 'critical', camera: 'KE-189' },                { type: 'Vehicle Breakdown', location: 'Waiyaki Way, Near Westlands', severity: 'medium', camera: 'KE-092' },                { type: 'Suspicious Activity', location: 'Bus Park, Nairobi CBD', severity: 'high', camera: 'KE-301' },                { type: 'Lane Violation', location: 'Uhuru Highway', severity: 'low', camera: 'KE-156' },                { type: 'Crowd Disturbance', location: 'Market Area, Kisumu', severity: 'medium', camera: 'KE-422' }            ];            for (let i = 0; i < 15; i++) {                const alert = alertTypes[Math.floor(Math.random() * alertTypes.length)];                const timeAgo = Math.floor(Math.random() * 120);                alerts.push({                    ...alert,                    id: Date.now() + i,                    time: new Date(Date.now() - timeAgo * 60000),                    status: Math.random() > 0.5 ? 'active' : 'responded'                });            }            // Generate sample incidents            const incidentTypes = ['accident', 'violation', 'security', 'infrastructure'];            for (let i = 0; i < 30; i++) {                incidents.push({                    id: 'INC-' + (1000 + i),                    type: incidentTypes[Math.floor(Math.random() * incidentTypes.length)],                    location: 'Location ' + i,                    time: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60000),                    status: ['open', 'investigating', 'resolved'][Math.floor(Math.random() * 3)],                    severity: ['low', 'medium', 'high', 'critical'][Math.floor(Math.random() * 4)]                });            }            // Generate sample citizen reports            for (let i = 0; i < 5; i++) {                citizenReports.push({                    id: 'CR-' + (2000 + i),                    type: incidentTypes[Math.floor(Math.random() * incidentTypes.length)],                    location: 'Reported Location ' + i,                    time: new Date(Date.now() - Math.random() * 24 * 60 * 60000),                    status: 'verified'                });            }        }        // Tab Switching        function switchTab(tabName) {            // Hide all tabs            document.querySelectorAll('.tab-content').forEach(tab => {                tab.classList.add('hidden');            });            // Remove active state from all buttons            document.querySelectorAll('.tab-btn').forEach(btn => {                btn.classList.remove('border-blue-600', 'text-blue-600');                btn.classList.add('border-transparent', 'text-gray-600');            });            // Show selected tab            document.getElementById(tabName + '-tab').classList.remove('hidden');            // Activate button            event.target.classList.remove('border-transparent', 'text-gray-600');            event.target.classList.add('border-blue-600', 'text-blue-600');            // Initialize map if map tab is selected            if (tabName === 'map' && !map) {                setTimeout(() => initializeMap(), 100);            }        }        // Render Alerts        function renderAlerts() {            const container = document.getElementById('alerts-container');            const recentAlerts = alerts.slice(0, 8);            container.innerHTML = recentAlerts.map(alert => {                const severityColors = {                    low: 'bg-blue-100 text-blue-800',                    medium: 'bg-yellow-100 text-yellow-800',                    high: 'bg-orange-100 text-orange-800',                    critical: 'bg-red-100 text-red-800'                };                const timeAgo = Math.floor((Date.now() - alert.time) / 60000);                return `                    <div class="border-l-4 ${alert.severity === 'critical' ? 'border-red-500' : 'border-orange-500'} bg-gray-50 p-3 rounded">                        <div class="flex justify-between items-start">                            <div class="flex-1">                                <p class="font-semibold">${alert.type}</p>                                <p class="text-sm text-gray-600">${alert.location}</p>                                <p class="text-xs text-gray-500">Camera: ${alert.camera} • ${timeAgo} min ago</p>                            </div>                            <span class="px-2 py-1 rounded text-xs font-semibold ${severityColors[alert.severity]}">${alert.severity.toUpperCase()}</span>                        </div>                        <div class="mt-2 flex space-x-2">                            <button onclick="respondToAlert(${alert.id})" class="text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">Respond</button>                            <button onclick="viewDetails(${alert.id})" class="text-xs bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700">Details</button>                        </div>                    </div>                `;            }).join('');        }        // Render Camera Feeds        function renderCameraFeeds() {            const container = document.getElementById('camera-feeds');            const cameras = [                { id: 'KE-247', location: 'Thika Road KM 12', status: 'active' },                { id: 'KE-189', location: 'Mombasa Road Exit 5', status: 'active' },                { id: 'KE-092', location: 'Waiyaki Way', status: 'active' },                { id: 'KE-301', location: 'Nairobi CBD Bus Park', status: 'active' },                { id: 'KE-156', location: 'Uhuru Highway', status: 'active' },                { id: 'KE-422', location: 'Kisumu Market', status: 'active' }            ];            container.innerHTML = cameras.map(camera => `                <div class="border rounded-lg overflow-hidden">                    <div class="bg-gray-800 text-white px-3 py-2 flex justify-between items-center">                        <span class="text-sm font-semibold">${camera.id}</span>                        <span class="w-2 h-2 bg-green-400 rounded-full pulse-alert"></span>                    </div>                    <div class="camera-feed bg-gray-900 h-48 relative flex items-center justify-center">                        <div class="text-green-400 text-6xl font-mono">▶</div>                        ${Math.random() > 0.6 ? `<div class="detection-box" style="top: 30%; left: 20%; width: 40%; height: 35%;">                            <span class="bg-red-500 text-white text-xs px-2 py-1 absolute -top-6">Vehicle Detected 94%</span>                        </div>` : ''}                    </div>                    <div class="bg-gray-100 px-3 py-2">                        <p class="text-xs text-gray-600">${camera.location}</p>                    </div>                </div>            `).join('');        }        // Render Detection Log        function renderDetectionLog() {            const tbody = document.getElementById('detection-log');            const detectionTypes = ['Overspeeding', 'Lane Violation', 'Vehicle Detected', 'Pedestrian Alert', 'Suspicious Behavior'];            const cameras = ['KE-247', 'KE-189', 'KE-092', 'KE-301', 'KE-156'];            let html = '';            for (let i = 0; i < 20; i++) {                const minutesAgo = i * 2;                const time = new Date(Date.now() - minutesAgo * 60000);                const detection = detectionTypes[Math.floor(Math.random() * detectionTypes.length)];                const confidence = 75 + Math.floor(Math.random() * 25);                                html += `                    <tr class="border-b hover:bg-gray-50">                        <td class="px-4 py-2 text-sm">${time.toLocaleTimeString()}</td>                        <td class="px-4 py-2 text-sm">${cameras[Math.floor(Math.random() * cameras.length)]}</td>                        <td class="px-4 py-2 text-sm">${detection}</td>                        <td class="px-4 py-2 text-sm">                            <div class="flex items-center">                                <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">                                    <div class="bg-green-600 h-2 rounded-full" style="width: ${confidence}%"></div>                                </div>                                <span>${confidence}%</span>                            </div>                        </td>                        <td class="px-4 py-2 text-sm">                            <span class="px-2 py-1 rounded text-xs ${confidence > 90 ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">                                ${confidence > 90 ? 'Verified' : 'Review'}                            </span>                        </td>                    </tr>                `;            }            tbody.innerHTML = html;        }        // Render Incidents        function renderIncidents() {            const container = document.getElementById('incidents-list');            const displayIncidents = incidents.slice(0, 15);            container.innerHTML = displayIncidents.map(incident => {                const typeColors = {                    accident: 'bg-red-100 text-red-800',                    violation: 'bg-yellow-100 text-yellow-800',                    security: 'bg-orange-100 text-orange-800',                    infrastructure: 'bg-blue-100 text-blue-800'                };                const statusColors = {                    open: 'bg-red-100 text-red-800',                    investigating: 'bg-yellow-100 text-yellow-800',                    resolved: 'bg-green-100 text-green-800'                };                return `                    <div class="border rounded-lg p-4 hover:shadow-md transition">                        <div class="flex justify-between items-start mb-2">                            <div>                                <p class="font-bold">${incident.id}</p>                                <p class="text-sm text-gray-600">${incident.location}</p>                                <p class="text-xs text-gray-500">${incident.time.toLocaleString()}</p>                            </div>                            <div class="text-right">                                <span class="px-2 py-1 rounded text-xs font-semibold ${typeColors[incident.type]} block mb-1">                                    ${incident.type.toUpperCase()}                                </span>                                <span class="px-2 py-1 rounded text-xs font-semibold ${statusColors[incident.status]}">                                    ${incident.status.toUpperCase()}                                </span>                            </div>                        </div>                        <div class="flex space-x-2 mt-3">                            <button onclick="updateIncidentStatus('${incident.id}')" class="text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">Update</button>                            <button onclick="viewIncidentDetails('${incident.id}')" class="text-sm bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700">View</button>                        </div>                    </div>                `;            }).join('');        }        // Filter Incidents        function filterIncidents() {            const filter = document.getElementById('incident-filter').value;            const filtered = filter === 'all' ? incidents : incidents.filter(i => i.type === filter);            // Re-render with filtered data            renderIncidents();        }        // Render Hotspots        function renderHotspots() {            const container = document.getElementById('hotspots-list');            const hotspots = [                { location: 'Thika Road (KM 10-15)', incidents: 47, risk: 'high' },                { location: 'Mombasa Road (Exit 3-7)', incidents: 38, risk: 'high' },                { location: 'Waiyaki Way (Westlands)', incidents: 29, risk: 'medium' },                { location: 'Nairobi CBD (Bus Park)', incidents: 56, risk: 'critical' },                { location: 'Uhuru Highway', incidents: 22, risk: 'medium' }            ];            container.innerHTML = hotspots.map((spot, index) => {                const riskColors = {                    low: 'bg-green-500',                    medium: 'bg-yellow-500',                    high: 'bg-orange-500',                    critical: 'bg-red-500'                };                return `                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded">                        <div class="flex-1">                            <p class="font-semibold text-sm">${index + 1}. ${spot.location}</p>                            <p class="text-xs text-gray-600">${spot.incidents} incidents (30 days)</p>                        </div>                        <div class="w-3 h-3 rounded-full ${riskColors[spot.risk]}"></div>                    </div>                `;            }).join('');        }        // Render Citizen Reports        function renderCitizenReports() {            const container = document.getElementById('citizen-reports-list');                        container.innerHTML = citizenReports.map(report => `                <div class="border-l-4 border-blue-500 bg-gray-50 p-3 rounded">                    <div class="flex justify-between">                        <div>                            <p class="font-semibold text-sm">${report.id}</p>                            <p class="text-xs text-gray-600">${report.location}</p>                            <p class="text-xs text-gray-500">${report.time.toLocaleString()}</p>                        </div>                        <span class="px-2 py-1 rounded text-xs font-semibold bg-green-100 text-green-800">VERIFIED</span>                    </div>                </div>            `).join('');        }        // Initialize Charts        function initializeCharts() {            // County Distribution Chart            const countyCtx = document.getElementById('countyChart').getContext('2d');            new Chart(countyCtx, {                type: 'pie',                data: {                    labels: ['Nairobi', 'Mombasa', 'Kisumu', 'Nakuru', 'Others'],                    datasets: [{                        data: [85, 45, 32, 28, 58],                        backgroundColor: ['#3B82F6', '#EF4444', '#F59E0B', '#10B981', '#6B7280']                    }]                },                options: {                    responsive: true,                    plugins: {                        legend: {                            position: 'bottom'                        }                    }                }            });            // Trends Chart            const trendsCtx = document.getElementById('trendsChart').getContext('2d');            new Chart(trendsCtx, {                type: 'line',                data: {                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],                    datasets: [{                        label: 'Accidents',                        data: [45, 38, 32, 28],                        borderColor: '#EF4444',                        tension: 0.4                    }, {                        label: 'Violations',                        data: [120, 115, 98, 89],                        borderColor: '#F59E0B',                        tension: 0.4                    }, {                        label: 'Security',                        data: [28, 32, 25, 21],                        borderColor: '#3B82F6',                        tension: 0.4                    }]                },                options: {                    responsive: true,                    plugins: {                        legend: {                            position: 'bottom'                        }                    }                }            });            // Categories Chart            const categoriesCtx = document.getElementById('categoriesChart').getContext('2d');            new Chart(categoriesCtx, {                type: 'doughnut',                data: {                    labels: ['Overspeeding', 'Lane Violations', 'Dangerous Driving', 'Security Alerts', 'Infrastructure'],                    datasets: [{                        data: [156, 89, 67, 45, 31],                        backgroundColor: ['#EF4444', '#F59E0B', '#F97316', '#3B82F6', '#6B7280']                    }]                },                options: {                    responsive: true,                    plugins: {                        legend: {                            position: 'bottom'                        }                    }                }            });        }        // Initialize Map        function initializeMap() {            if (map) return;            map = L.map('map').setView([-1.286389, 36.817223], 7);                        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {                attribution: '© OpenStreetMap contributors'            }).addTo(map);            // Add sample markers            const locations = [                { lat: -1.286389, lng: 36.817223, name: 'Nairobi CBD', type: 'camera' },                { lat: -1.219539, lng: 36.886215, name: 'Thika Road', type: 'incident' },                { lat: -4.043477, lng: 39.668206, name: 'Mombasa', type: 'camera' },                { lat: -0.091702, lng: 34.767956, name: 'Kisumu', type: 'camera' },                { lat: -0.303099, lng: 36.080026, name: 'Nakuru', type: 'hotspot' }            ];            locations.forEach(loc => {                let icon = L.divIcon({                    className: 'custom-marker',                    html: `<div style="background: ${loc.type === 'incident' ? '#EF4444' : loc.type === 'hotspot' ? '#F59E0B' : '#3B82F6'}; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white;"></div>`,                    iconSize: [24, 24]                });                L.marker([loc.lat, loc.lng], { icon: icon })                    .bindPopup(`<b>${loc.name}</b><br>Type: ${loc.type}`)                    .addTo(map);            });        }        // Action Functions        function dispatchEmergency(type) {            const messages = {                police: 'Police unit has been dispatched to the location',                ambulance: 'Ambulance is on the way',                fire: 'Fire service has been alerted'            };            showSuccess(messages[type]);        }        function generateReport() {            showSuccess('Comprehensive report is being generated. You will receive it via email shortly.');        }        function respondToAlert(id) {            showSuccess('Response team has been notified. ETA: 4 minutes');        }        function viewDetails(id) {            showSuccess('Opening detailed view...');        }        function updateIncidentStatus(id) {            showSuccess(`Incident ${id} status updated successfully`);        }        function viewIncidentDetails(id) {            showSuccess(`Viewing details for incident ${id}`);        }        function toggleMapLayer(layer) {            showSuccess(`${layer} layer toggled`);        }        // Citizen Report Form        document.getElementById('citizen-report-form')?.addEventListener('submit', function(e) {            e.preventDefault();                        const formData = {                type: document.getElementById('report-type').value,                location: document.getElementById('report-location').value,                description: document.getElementById('report-description').value,                severity: document.querySelector('input[name="severity"]:checked').value,                contact: document.getElementById('report-contact').value            };            // Simulate AI verification            setTimeout(() => {                const reportId = 'CR-' + (3000 + Math.floor(Math.random() * 1000));                showSuccess(`Report ${reportId} submitted successfully! AI verification in progress. Authorities will be notified within 2 minutes.`);                                // Add to citizen reports                citizenReports.unshift({                    id: reportId,                    type: formData.type,                    location: formData.location,                    time: new Date(),                    status: 'verifying'                });                                renderCitizenReports();                e.target.reset();            }, 1000);        });        // Real-time Updates        function startRealTimeUpdates() {            setInterval(() => {                // Update active cameras count                const cameras = 248 + Math.floor(Math.random() * 3) - 1;                document.getElementById('active-cameras').textContent = cameras;                // Update active alerts                const alertsCount = 15 + Math.floor(Math.random() * 5);                document.getElementById('active-alerts').textContent = alertsCount;                // Update incidents today                const incidentsCount = 40 + Math.floor(Math.random() * 10);                document.getElementById('incidents-today').textContent = incidentsCount;            }, 5000);        }        // Modal Functions        function showSuccess(message) {            document.getElementById('modal-message').textContent = message;            document.getElementById('success-modal').classList.add('active');        }        function closeModal() {            document.getElementById('success-modal').classList.remove('active');        }    </script></body></html>